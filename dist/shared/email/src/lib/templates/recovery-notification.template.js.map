{"version":3,"sources":["../../../../../../shared/email/src/lib/templates/recovery-notification.template.ts"],"sourcesContent":["export interface RecoveryNotificationEmailData {\r\n  ownerName: string;\r\n  tenantName: string;\r\n  backupOwnerName: string;\r\n  recoveryTimestamp: string;\r\n  ipAddress: string;\r\n}\r\n\r\nfunction escapeHtml(str: string): string {\r\n  return str\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&#39;');\r\n}\r\n\r\nexport function getRecoveryNotificationEmailHtml(\r\n  data: RecoveryNotificationEmailData\r\n): string {\r\n  const owner = escapeHtml(data.ownerName);\r\n  const tenant = escapeHtml(data.tenantName);\r\n  const backup = escapeHtml(data.backupOwnerName);\r\n  const timestamp = escapeHtml(data.recoveryTimestamp);\r\n  const ip = escapeHtml(data.ipAddress);\r\n\r\n  return `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Account Recovery Action Taken</title>\r\n</head>\r\n<body style=\"margin:0;padding:0;background-color:#f4f4f5;font-family:Arial,Helvetica,sans-serif;\">\r\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#f4f4f5;padding:40px 0;\">\r\n    <tr>\r\n      <td align=\"center\">\r\n        <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#ffffff;border-radius:8px;overflow:hidden;\">\r\n          <tr>\r\n            <td style=\"background-color:#18181b;padding:24px 32px;\">\r\n              <h1 style=\"color:#ffffff;margin:0;font-size:24px;\">Mentor AI</h1>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style=\"padding:32px;\">\r\n              <h2 style=\"color:#dc2626;margin:0 0 16px;\">Account Recovery Action</h2>\r\n              <p style=\"color:#3f3f46;font-size:16px;line-height:1.5;margin:0 0 16px;\">\r\n                Hi${owner ? ` ${owner}` : ''},\r\n              </p>\r\n              <p style=\"color:#3f3f46;font-size:16px;line-height:1.5;margin:0 0 16px;\">\r\n                Your two-factor authentication (2FA) for <strong>${tenant}</strong> has been reset by your designated Backup Owner, <strong>${backup}</strong>.\r\n              </p>\r\n              <table width=\"100%\" cellpadding=\"8\" cellspacing=\"0\" style=\"background-color:#fef2f2;border-radius:4px;margin:0 0 16px;\">\r\n                <tr>\r\n                  <td style=\"color:#3f3f46;font-size:14px;\">\r\n                    <strong>Recovery Details:</strong><br>\r\n                    Initiated by: ${backup}<br>\r\n                    Timestamp: ${timestamp}<br>\r\n                    IP Address: ${ip}\r\n                  </td>\r\n                </tr>\r\n              </table>\r\n              <p style=\"color:#3f3f46;font-size:16px;line-height:1.5;margin:0 0 16px;\">\r\n                <strong>What you need to do:</strong> On your next login, you will be prompted to set up a new 2FA method. Please do so immediately to secure your account.\r\n              </p>\r\n              <p style=\"color:#dc2626;font-size:14px;line-height:1.5;margin:0;\">\r\n                If you did not authorize this recovery, please contact support immediately.\r\n              </p>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style=\"background-color:#f4f4f5;padding:16px 32px;text-align:center;\">\r\n              <p style=\"color:#a1a1aa;font-size:12px;margin:0;\">\r\n                &copy; ${new Date().getFullYear()} Mentor AI. All rights reserved.\r\n              </p>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n</body>\r\n</html>`.trim();\r\n}\r\n\r\nexport function getRecoveryNotificationEmailText(\r\n  data: RecoveryNotificationEmailData\r\n): string {\r\n  return [\r\n    `IMPORTANT: Account Recovery Action - ${data.tenantName}`,\r\n    '',\r\n    `Hi${data.ownerName ? ` ${data.ownerName}` : ''},`,\r\n    '',\r\n    `Your two-factor authentication (2FA) for ${data.tenantName} has been reset by your designated Backup Owner, ${data.backupOwnerName}.`,\r\n    '',\r\n    'Recovery Details:',\r\n    `  Initiated by: ${data.backupOwnerName}`,\r\n    `  Timestamp: ${data.recoveryTimestamp}`,\r\n    `  IP Address: ${data.ipAddress}`,\r\n    '',\r\n    'What you need to do: On your next login, you will be prompted to set up a new 2FA method. Please do so immediately to secure your account.',\r\n    '',\r\n    'If you did not authorize this recovery, please contact support immediately.',\r\n  ].join('\\n');\r\n}\r\n"],"names":["getRecoveryNotificationEmailHtml","getRecoveryNotificationEmailText","escapeHtml","str","replace","data","owner","ownerName","tenant","tenantName","backup","backupOwnerName","timestamp","recoveryTimestamp","ip","ipAddress","Date","getFullYear","trim","join"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAiBgBA,gCAAgC;eAAhCA;;IAqEAC,gCAAgC;eAAhCA;;;AA9EhB,SAASC,WAAWC,GAAW;IAC7B,OAAOA,IACJC,OAAO,CAAC,MAAM,SACdA,OAAO,CAAC,MAAM,QACdA,OAAO,CAAC,MAAM,QACdA,OAAO,CAAC,MAAM,UACdA,OAAO,CAAC,MAAM;AACnB;AAEO,SAASJ,iCACdK,IAAmC;IAEnC,MAAMC,QAAQJ,WAAWG,KAAKE,SAAS;IACvC,MAAMC,SAASN,WAAWG,KAAKI,UAAU;IACzC,MAAMC,SAASR,WAAWG,KAAKM,eAAe;IAC9C,MAAMC,YAAYV,WAAWG,KAAKQ,iBAAiB;IACnD,MAAMC,KAAKZ,WAAWG,KAAKU,SAAS;IAEpC,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;kBAsBQ,EAAET,QAAQ,CAAC,CAAC,EAAEA,MAAM,CAAC,GAAG,GAAG;;;iEAGoB,EAAEE,OAAO,kEAAkE,EAAEE,OAAO;;;;;;kCAMnH,EAAEA,OAAO;+BACZ,EAAEE,UAAU;gCACX,EAAEE,GAAG;;;;;;;;;;;;;;;uBAed,EAAE,IAAIE,OAAOC,WAAW,GAAG;;;;;;;;;OAS3C,CAAC,CAACC,IAAI;AACb;AAEO,SAASjB,iCACdI,IAAmC;IAEnC,OAAO;QACL,CAAC,qCAAqC,EAAEA,KAAKI,UAAU,CAAC,CAAC;QACzD;QACA,CAAC,EAAE,EAAEJ,KAAKE,SAAS,GAAG,CAAC,CAAC,EAAEF,KAAKE,SAAS,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;QAClD;QACA,CAAC,yCAAyC,EAAEF,KAAKI,UAAU,CAAC,iDAAiD,EAAEJ,KAAKM,eAAe,CAAC,CAAC,CAAC;QACtI;QACA;QACA,CAAC,gBAAgB,EAAEN,KAAKM,eAAe,CAAC,CAAC;QACzC,CAAC,aAAa,EAAEN,KAAKQ,iBAAiB,CAAC,CAAC;QACxC,CAAC,cAAc,EAAER,KAAKU,SAAS,CAAC,CAAC;QACjC;QACA;QACA;QACA;KACD,CAACI,IAAI,CAAC;AACT"}