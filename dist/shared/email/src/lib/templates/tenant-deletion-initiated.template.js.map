{"version":3,"sources":["../../../../../../shared/email/src/lib/templates/tenant-deletion-initiated.template.ts"],"sourcesContent":["export interface TenantDeletionInitiatedEmailData {\r\n  userName: string;\r\n  tenantName: string;\r\n  requestedByName: string;\r\n  requestedByEmail: string;\r\n  gracePeriodEndsAt: string;\r\n}\r\n\r\nfunction escapeHtml(str: string): string {\r\n  return str\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&#39;');\r\n}\r\n\r\nfunction formatDate(isoDate: string): string {\r\n  const date = new Date(isoDate);\r\n  return date.toLocaleDateString('en-US', {\r\n    weekday: 'long',\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    timeZoneName: 'short',\r\n  });\r\n}\r\n\r\nexport function getTenantDeletionInitiatedEmailHtml(\r\n  data: TenantDeletionInitiatedEmailData\r\n): string {\r\n  const name = escapeHtml(data.userName);\r\n  const tenant = escapeHtml(data.tenantName);\r\n  const requestedBy = escapeHtml(data.requestedByName);\r\n  const requestedByEmail = escapeHtml(data.requestedByEmail);\r\n  const gracePeriodEnds = formatDate(data.gracePeriodEndsAt);\r\n\r\n  return `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Important: Workspace scheduled for deletion</title>\r\n</head>\r\n<body style=\"margin:0;padding:0;background-color:#f4f4f5;font-family:Arial,Helvetica,sans-serif;\">\r\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#f4f4f5;padding:40px 0;\">\r\n    <tr>\r\n      <td align=\"center\">\r\n        <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#ffffff;border-radius:8px;overflow:hidden;\">\r\n          <tr>\r\n            <td style=\"background-color:#dc2626;padding:24px 32px;\">\r\n              <h1 style=\"color:#ffffff;margin:0;font-size:24px;\">Mentor AI</h1>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style=\"padding:32px;\">\r\n              <h2 style=\"color:#dc2626;margin:0 0 16px;\">⚠️ Workspace Scheduled for Deletion</h2>\r\n              <p style=\"color:#3f3f46;font-size:16px;line-height:1.5;margin:0 0 16px;\">\r\n                Hi${name ? ` ${name}` : ''},\r\n              </p>\r\n              <p style=\"color:#3f3f46;font-size:16px;line-height:1.5;margin:0 0 16px;\">\r\n                The workspace <strong>${tenant}</strong> has been scheduled for deletion by ${requestedBy}.\r\n              </p>\r\n\r\n              <div style=\"background-color:#fef2f2;border:1px solid #fecaca;border-radius:8px;padding:16px;margin:16px 0;\">\r\n                <p style=\"color:#991b1b;font-size:16px;font-weight:bold;margin:0 0 8px;\">What this means:</p>\r\n                <ul style=\"color:#991b1b;font-size:14px;line-height:1.6;margin:0;padding-left:20px;\">\r\n                  <li>All workspace data will be permanently deleted</li>\r\n                  <li>All team members will lose access</li>\r\n                  <li>This action cannot be undone after the grace period</li>\r\n                </ul>\r\n              </div>\r\n\r\n              <p style=\"color:#3f3f46;font-size:16px;line-height:1.5;margin:16px 0 8px;\">\r\n                <strong>Deletion scheduled for:</strong>\r\n              </p>\r\n              <p style=\"color:#dc2626;font-size:18px;font-weight:bold;margin:0 0 16px;\">\r\n                ${gracePeriodEnds}\r\n              </p>\r\n\r\n              <p style=\"color:#3f3f46;font-size:16px;line-height:1.5;margin:0 0 16px;\">\r\n                The workspace owner can cancel this deletion within the 7-day grace period. After this time, deletion will proceed automatically.\r\n              </p>\r\n\r\n              <p style=\"color:#71717a;font-size:14px;line-height:1.5;margin:16px 0 0;\">\r\n                If you believe this was a mistake, please contact the workspace owner at ${requestedByEmail}.\r\n              </p>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style=\"background-color:#f4f4f5;padding:16px 32px;text-align:center;\">\r\n              <p style=\"color:#a1a1aa;font-size:12px;margin:0;\">\r\n                &copy; ${new Date().getFullYear()} Mentor AI. All rights reserved.\r\n              </p>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n</body>\r\n</html>`.trim();\r\n}\r\n\r\nexport function getTenantDeletionInitiatedEmailText(\r\n  data: TenantDeletionInitiatedEmailData\r\n): string {\r\n  const gracePeriodEnds = formatDate(data.gracePeriodEndsAt);\r\n\r\n  return [\r\n    `IMPORTANT: ${data.tenantName} scheduled for deletion`,\r\n    '',\r\n    `Hi${data.userName ? ` ${data.userName}` : ''},`,\r\n    '',\r\n    `The workspace \"${data.tenantName}\" has been scheduled for deletion by ${data.requestedByName}.`,\r\n    '',\r\n    'What this means:',\r\n    '- All workspace data will be permanently deleted',\r\n    '- All team members will lose access',\r\n    '- This action cannot be undone after the grace period',\r\n    '',\r\n    `Deletion scheduled for: ${gracePeriodEnds}`,\r\n    '',\r\n    'The workspace owner can cancel this deletion within the 7-day grace period. After this time, deletion will proceed automatically.',\r\n    '',\r\n    `If you believe this was a mistake, please contact the workspace owner at ${data.requestedByEmail}.`,\r\n  ].join('\\n');\r\n}\r\n"],"names":["getTenantDeletionInitiatedEmailHtml","getTenantDeletionInitiatedEmailText","escapeHtml","str","replace","formatDate","isoDate","date","Date","toLocaleDateString","weekday","year","month","day","hour","minute","timeZoneName","data","name","userName","tenant","tenantName","requestedBy","requestedByName","requestedByEmail","gracePeriodEnds","gracePeriodEndsAt","getFullYear","trim","join"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IA8BgBA,mCAAmC;eAAnCA;;IA6EAC,mCAAmC;eAAnCA;;;AAnGhB,SAASC,WAAWC,GAAW;IAC7B,OAAOA,IACJC,OAAO,CAAC,MAAM,SACdA,OAAO,CAAC,MAAM,QACdA,OAAO,CAAC,MAAM,QACdA,OAAO,CAAC,MAAM,UACdA,OAAO,CAAC,MAAM;AACnB;AAEA,SAASC,WAAWC,OAAe;IACjC,MAAMC,OAAO,IAAIC,KAAKF;IACtB,OAAOC,KAAKE,kBAAkB,CAAC,SAAS;QACtCC,SAAS;QACTC,MAAM;QACNC,OAAO;QACPC,KAAK;QACLC,MAAM;QACNC,QAAQ;QACRC,cAAc;IAChB;AACF;AAEO,SAAShB,oCACdiB,IAAsC;IAEtC,MAAMC,OAAOhB,WAAWe,KAAKE,QAAQ;IACrC,MAAMC,SAASlB,WAAWe,KAAKI,UAAU;IACzC,MAAMC,cAAcpB,WAAWe,KAAKM,eAAe;IACnD,MAAMC,mBAAmBtB,WAAWe,KAAKO,gBAAgB;IACzD,MAAMC,kBAAkBpB,WAAWY,KAAKS,iBAAiB;IAEzD,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;kBAsBQ,EAAER,OAAO,CAAC,CAAC,EAAEA,KAAK,CAAC,GAAG,GAAG;;;sCAGL,EAAEE,OAAO,6CAA6C,EAAEE,YAAY;;;;;;;;;;;;;;;;gBAgB1F,EAAEG,gBAAgB;;;;;;;;yFAQuD,EAAED,iBAAiB;;;;;;;uBAOrF,EAAE,IAAIhB,OAAOmB,WAAW,GAAG;;;;;;;;;OAS3C,CAAC,CAACC,IAAI;AACb;AAEO,SAAS3B,oCACdgB,IAAsC;IAEtC,MAAMQ,kBAAkBpB,WAAWY,KAAKS,iBAAiB;IAEzD,OAAO;QACL,CAAC,WAAW,EAAET,KAAKI,UAAU,CAAC,uBAAuB,CAAC;QACtD;QACA,CAAC,EAAE,EAAEJ,KAAKE,QAAQ,GAAG,CAAC,CAAC,EAAEF,KAAKE,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;QAChD;QACA,CAAC,eAAe,EAAEF,KAAKI,UAAU,CAAC,qCAAqC,EAAEJ,KAAKM,eAAe,CAAC,CAAC,CAAC;QAChG;QACA;QACA;QACA;QACA;QACA;QACA,CAAC,wBAAwB,EAAEE,gBAAgB,CAAC;QAC5C;QACA;QACA;QACA,CAAC,yEAAyE,EAAER,KAAKO,gBAAgB,CAAC,CAAC,CAAC;KACrG,CAACK,IAAI,CAAC;AACT"}