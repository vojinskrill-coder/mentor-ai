{"version":3,"sources":["../../../../../shared/tenant-context/src/lib/platform-prisma.service.ts"],"sourcesContent":["import { Injectable, OnModuleInit, OnModuleDestroy } from '@nestjs/common';\r\nimport { ConfigService } from '@nestjs/config';\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\n@Injectable()\r\nexport class PlatformPrismaService extends PrismaClient implements OnModuleInit, OnModuleDestroy {\r\n  constructor(configService: ConfigService) {\r\n    const databaseUrl = configService.get<string>('DATABASE_URL');\r\n\r\n    if (!databaseUrl) {\r\n      throw new Error(\r\n        'DATABASE_URL environment variable is required but not set. ' +\r\n        'Please configure DATABASE_URL in your .env file. ' +\r\n        'Example: DATABASE_URL=postgresql://user:password@localhost:5432/mentor_ai_platform'\r\n      );\r\n    }\r\n\r\n    super({\r\n      datasources: {\r\n        db: { url: databaseUrl },\r\n      },\r\n    });\r\n  }\r\n\r\n  async onModuleInit(): Promise<void> {\r\n    await this.$connect();\r\n  }\r\n\r\n  async onModuleDestroy(): Promise<void> {\r\n    await this.$disconnect();\r\n  }\r\n}\r\n"],"names":["PlatformPrismaService","PrismaClient","onModuleInit","$connect","onModuleDestroy","$disconnect","constructor","configService","databaseUrl","get","Error","datasources","db","url","Injectable"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAKaA;;;eAAAA;;;;;wBAL6C;wBAC5B;wBACD;AAGtB,IAAA,AAAMA,wBAAN,MAAMA,8BAA8BC,oBAAY;IAmBrD,MAAMC,eAA8B;QAClC,MAAM,IAAI,CAACC,QAAQ;IACrB;IAEA,MAAMC,kBAAiC;QACrC,MAAM,IAAI,CAACC,WAAW;IACxB;IAxBAC,YAAYC,aAA4B,CAAE;QACxC,MAAMC,cAAcD,cAAcE,GAAG,CAAS;QAE9C,IAAI,CAACD,aAAa;YAChB,MAAM,IAAIE,MACR,gEACA,sDACA;QAEJ;QAEA,KAAK,CAAC;YACJC,aAAa;gBACXC,IAAI;oBAAEC,KAAKL;gBAAY;YACzB;QACF;IACF;AASF;AA1BaR;IADZc,IAAAA,kBAAU;;;eAEkB,qBAAa,4BAAb,qBAAa;;GAD7Bd"}