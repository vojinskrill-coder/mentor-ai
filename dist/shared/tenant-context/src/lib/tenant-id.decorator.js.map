{"version":3,"sources":["../../../../../shared/tenant-context/src/lib/tenant-id.decorator.ts"],"sourcesContent":["import { createParamDecorator, ExecutionContext, ForbiddenException } from '@nestjs/common';\r\nimport { Request } from 'express';\r\n\r\n/**\r\n * Parameter decorator to extract the tenant ID from the request context.\r\n * The tenant ID is set by TenantMiddleware after validation.\r\n *\r\n * @example\r\n * ```typescript\r\n * @Get('data')\r\n * getData(@TenantId() tenantId: string) {\r\n *   return this.myService.getData(tenantId);\r\n * }\r\n * ```\r\n */\r\nexport const TenantId = createParamDecorator(\r\n  (data: unknown, ctx: ExecutionContext): string => {\r\n    const request = ctx.switchToHttp().getRequest<Request>();\r\n    const tenantId = request.tenantId;\r\n\r\n    if (!tenantId) {\r\n      throw new ForbiddenException({\r\n        type: 'tenant_context_missing',\r\n        title: 'Tenant Context Missing',\r\n        status: 403,\r\n        detail: 'Tenant context not available. Ensure TenantMiddleware is configured.',\r\n      });\r\n    }\r\n\r\n    return tenantId;\r\n  }\r\n);\r\n"],"names":["TenantId","createParamDecorator","data","ctx","request","switchToHttp","getRequest","tenantId","ForbiddenException","type","title","status","detail"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAeaA;;;eAAAA;;;wBAf8D;AAepE,MAAMA,WAAWC,IAAAA,4BAAoB,EAC1C,CAACC,MAAeC;IACd,MAAMC,UAAUD,IAAIE,YAAY,GAAGC,UAAU;IAC7C,MAAMC,WAAWH,QAAQG,QAAQ;IAEjC,IAAI,CAACA,UAAU;QACb,MAAM,IAAIC,0BAAkB,CAAC;YAC3BC,MAAM;YACNC,OAAO;YACPC,QAAQ;YACRC,QAAQ;QACV;IACF;IAEA,OAAOL;AACT"}