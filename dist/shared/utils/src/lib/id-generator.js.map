{"version":3,"sources":["../../../../../shared/utils/src/lib/id-generator.ts"],"sourcesContent":["/**\r\n * Entity ID generators with prefixes\r\n * Uses cuid2 for collision-resistant, URL-safe IDs\r\n * Prefixes identify entity types: usr_ (user), tnt_ (tenant)\r\n */\r\n\r\nimport { createId } from '@paralleldrive/cuid2';\r\n\r\n/** Entity ID prefixes */\r\nexport const ID_PREFIX = {\r\n  USER: 'usr_',\r\n  TENANT: 'tnt_',\r\n  INVITATION: 'inv_',\r\n} as const;\r\n\r\n/** Generate a user ID with usr_ prefix */\r\nexport function generateUserId(): string {\r\n  return `${ID_PREFIX.USER}${createId()}`;\r\n}\r\n\r\n/** Generate a tenant ID with tnt_ prefix */\r\nexport function generateTenantId(): string {\r\n  return `${ID_PREFIX.TENANT}${createId()}`;\r\n}\r\n\r\n/** Generate an invitation ID with inv_ prefix */\r\nexport function generateInvitationId(): string {\r\n  return `${ID_PREFIX.INVITATION}${createId()}`;\r\n}\r\n\r\n/** Generate a URL-safe invite token (no prefix, used in invite links) */\r\nexport function generateInviteToken(): string {\r\n  return createId();\r\n}\r\n\r\n/** Validate that an ID has the expected prefix */\r\nexport function hasValidPrefix(\r\n  id: string,\r\n  prefix: (typeof ID_PREFIX)[keyof typeof ID_PREFIX]\r\n): boolean {\r\n  return id.startsWith(prefix);\r\n}\r\n\r\n/** Extract the raw ID without prefix */\r\nexport function stripPrefix(id: string): string {\r\n  const prefixMatch = Object.values(ID_PREFIX).find((p) => id.startsWith(p));\r\n  return prefixMatch ? id.slice(prefixMatch.length) : id;\r\n}\r\n"],"names":["ID_PREFIX","generateInvitationId","generateInviteToken","generateTenantId","generateUserId","hasValidPrefix","stripPrefix","USER","TENANT","INVITATION","createId","id","prefix","startsWith","prefixMatch","Object","values","find","p","slice","length"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA;;;;CAIC;;;;;;;;;;;IAKYA,SAAS;eAATA;;IAiBGC,oBAAoB;eAApBA;;IAKAC,mBAAmB;eAAnBA;;IAVAC,gBAAgB;eAAhBA;;IALAC,cAAc;eAAdA;;IAoBAC,cAAc;eAAdA;;IAQAC,WAAW;eAAXA;;;uBAtCS;AAGlB,MAAMN,YAAY;IACvBO,MAAM;IACNC,QAAQ;IACRC,YAAY;AACd;AAGO,SAASL;IACd,OAAO,CAAC,EAAEJ,UAAUO,IAAI,CAAC,EAAEG,IAAAA,eAAQ,IAAG,CAAC;AACzC;AAGO,SAASP;IACd,OAAO,CAAC,EAAEH,UAAUQ,MAAM,CAAC,EAAEE,IAAAA,eAAQ,IAAG,CAAC;AAC3C;AAGO,SAAST;IACd,OAAO,CAAC,EAAED,UAAUS,UAAU,CAAC,EAAEC,IAAAA,eAAQ,IAAG,CAAC;AAC/C;AAGO,SAASR;IACd,OAAOQ,IAAAA,eAAQ;AACjB;AAGO,SAASL,eACdM,EAAU,EACVC,MAAkD;IAElD,OAAOD,GAAGE,UAAU,CAACD;AACvB;AAGO,SAASN,YAAYK,EAAU;IACpC,MAAMG,cAAcC,OAAOC,MAAM,CAAChB,WAAWiB,IAAI,CAAC,CAACC,IAAMP,GAAGE,UAAU,CAACK;IACvE,OAAOJ,cAAcH,GAAGQ,KAAK,CAACL,YAAYM,MAAM,IAAIT;AACtD"}