import{a as A}from"./chunk-F5XO33SK.js";import{c as te,d as j,e as ne,f as ie,h as oe,i as ae,j as re,k as le,l as de,m as se,q as me,s as ce}from"./chunk-BJPJ353G.js";import{b as ee}from"./chunk-X5FYGGBF.js";import{a as E}from"./chunk-QLHVQZLH.js";import{$a as D,A as C,C as y,Ca as U,D as P,Da as B,E as f,Ea as r,F as h,Fa as b,Ga as M,H as R,K as u,L as Y,Ua as z,V as l,Va as $,Z as S,db as Q,fa as m,g as K,ga as c,ja as w,ka as T,l as J,la as I,lb as Z,ma as i,na as a,oa as v,p as H,pa as p,qa as g,ra as F,sa as O,ta as N,ua as _,va as k,wa as s,x as X}from"./chunk-GC2SN3QZ.js";var V=class n{http=C(Q);baseUrl="/api/team";getMembers(){return this.http.get(`${this.baseUrl}/members`).pipe(H(this.handleError))}removeMember(t,e){return this.http.post(`${this.baseUrl}/members/${t}/remove`,{strategy:e}).pipe(H(this.handleError))}handleError(t){let e="An unexpected error occurred. Please try again.";if(t.error){let o=t.error;o.detail?e=o.detail:o.title&&(e=o.title)}else t.status===0&&(e="Unable to connect to the server. Please check your connection.");return K(()=>new Error(e))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=X({token:n,factory:n.\u0275fac,providedIn:"root"})};var ue=(n,t)=>t.value;function be(n,t){if(n&1&&(i(0,"div",8),r(1),a()),n&2){let e=s();l(),b(e.errorMessage$())}}function fe(n,t){n&1&&r(0," Email je obavezan ")}function ve(n,t){n&1&&r(0," Unesite validnu email adresu ")}function _e(n,t){if(n&1&&(i(0,"p",12),m(1,fe,1,0)(2,ve,1,0),a()),n&2){let e=s();l(),c(e.form.controls.email.errors.required?1:e.form.controls.email.errors.email?2:-1)}}function xe(n,t){if(n&1&&(i(0,"option",16),r(1),a()),n&2){let e=t.$implicit;I("value",e.value),l(),b(e.label)}}function Ce(n,t){n&1&&(i(0,"p",12),r(1,"Izaberite odeljenje"),a())}function he(n,t){n&1&&(v(0,"span",23),r(1," Slanje... "))}function Me(n,t){n&1&&r(0," Po\u0161alji poziv ")}var Ee=[{value:"FINANCE",label:"Finansije"},{value:"MARKETING",label:"Marketing"},{value:"TECHNOLOGY",label:"Tehnologija"},{value:"OPERATIONS",label:"Operacije"},{value:"LEGAL",label:"Pravo"},{value:"CREATIVE",label:"Kreativa"}],L=class n{close=z();fb=C(me);invitationService=C(A);destroyRef=C(R);departments=Ee;isSubmitting$=u(!1);errorMessage$=u(null);form=this.fb.group({email:["",[j.required,j.email]],department:["",j.required]});onClose(){this.close.emit(!1)}onSubmit(){if(this.form.invalid||this.isSubmitting$())return;this.isSubmitting$.set(!0),this.errorMessage$.set(null);let t=this.form.value;this.invitationService.createInvitation({email:t.email,department:t.department}).pipe(E(this.destroyRef)).subscribe({next:()=>{this.close.emit(!0)},error:e=>{this.errorMessage$.set(e.message),this.isSubmitting$.set(!1)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["app-invite-dialog"]],outputs:{close:"close"},decls:38,vars:6,consts:[[1,"overlay"],[1,"backdrop",3,"click"],[1,"dialog"],[1,"dialog-header"],[1,"close-btn",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[3,"ngSubmit","formGroup"],[1,"error-box"],[1,"field-group"],["for","invite-email",1,"field-label"],["id","invite-email","type","email","formControlName","email","placeholder","kolega@kompanija.com",1,"field-input"],[1,"field-error"],["for","invite-department",1,"field-label"],["id","invite-department","formControlName","department",1,"field-input"],["value","","disabled",""],[3,"value"],[1,"field-label"],[1,"role-display"],[1,"field-hint"],[1,"actions"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"submit-btn",3,"disabled"],[1,"btn-spinner"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1),_("click",function(){return o.onClose()}),a(),i(2,"div",2)(3,"div",3)(4,"h2"),r(5,"Pozovi \u010Dlana tima"),a(),i(6,"button",4),_("click",function(){return o.onClose()}),f(),i(7,"svg",5),v(8,"path",6),a()()(),h(),i(9,"form",7),_("ngSubmit",function(){return o.onSubmit()}),m(10,be,2,1,"div",8),i(11,"div",9)(12,"label",10),r(13,"Email adresa"),a(),v(14,"input",11),m(15,_e,3,1,"p",12),a(),i(16,"div",9)(17,"label",13),r(18,"Odeljenje"),a(),i(19,"select",14)(20,"option",15),r(21,"Izaberite odeljenje"),a(),w(22,xe,2,2,"option",16,ue),a(),m(24,Ce,2,0,"p",12),a(),i(25,"div",9)(26,"label",17),r(27,"Uloga"),a(),i(28,"div",18),r(29,"\u010Clan tima"),a(),i(30,"p",19),r(31,"Pozvani korisnici dobijaju ulogu \u010Dlana tima."),a()(),i(32,"div",20)(33,"button",21),_("click",function(){return o.onClose()}),r(34,"Otka\u017Ei"),a(),i(35,"button",22),m(36,he,2,0)(37,Me,1,0),a()()()()()),e&2&&(l(9),I("formGroup",o.form),l(),c(o.errorMessage$()?10:-1),l(5),c(o.form.controls.email.touched&&o.form.controls.email.errors?15:-1),l(7),T(o.departments),l(2),c(o.form.controls.department.touched&&o.form.controls.department.errors?24:-1),l(11),I("disabled",o.isSubmitting$()||o.form.invalid),l(),c(o.isSubmitting$()?36:37))},dependencies:[D,ce,oe,de,se,te,le,ne,ie,re,ae],styles:[`[_nghost-%COMP%]{display:block}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:50;display:flex;align-items:center;justify-content:center;padding:16px}.backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080}.dialog[_ngcontent-%COMP%]{position:relative;z-index:10;width:100%;max-width:440px;background:#1a1a1a;border:1px solid #2a2a2a;border-radius:12px;padding:24px;box-shadow:0 25px 50px -12px #00000080;color:#fafafa;font-family:Inter,system-ui,sans-serif}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.close-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:6px;border:none;background:transparent;color:#9e9e9e;cursor:pointer}.close-btn[_ngcontent-%COMP%]:hover{background:#242424;color:#fafafa}.close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.error-box[_ngcontent-%COMP%]{background:#ef44441a;border:1px solid rgba(239,68,68,.2);border-radius:8px;padding:12px;margin-bottom:16px;font-size:13px;color:#ef4444}.field-group[_ngcontent-%COMP%]{margin-bottom:16px}.field-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;margin-bottom:8px}.field-input[_ngcontent-%COMP%]{width:100%;border-radius:8px;border:1px solid #2a2a2a;background:#0d0d0d;padding:10px 12px;font-size:14px;color:#fafafa;outline:none;font-family:inherit;transition:border-color .2s}.field-input[_ngcontent-%COMP%]:focus{border-color:#3b82f6}.field-input[_ngcontent-%COMP%]::placeholder{color:#707070}select.field-input[_ngcontent-%COMP%]{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239e9e9e' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;padding-right:32px}select.field-input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#1a1a1a;color:#fafafa}.field-error[_ngcontent-%COMP%]{font-size:12px;color:#ef4444;margin-top:4px}.field-hint[_ngcontent-%COMP%]{font-size:12px;color:#9e9e9e;margin-top:4px}.role-display[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #2a2a2a;background:#242424;padding:10px 12px;font-size:14px;color:#9e9e9e}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:8px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;border:1px solid #2a2a2a;background:#242424;color:#fafafa;font-size:14px;font-weight:500;cursor:pointer;font-family:inherit}.cancel-btn[_ngcontent-%COMP%]:hover{background:#2a2a2a}.submit-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:8px;border:none;background:#3b82f6;color:#fff;font-size:14px;font-weight:500;cursor:pointer;font-family:inherit}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.btn-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}`]})};function ye(n,t){if(n&1&&(p(0,"div",19),r(1),g()),n&2){let e=s();l(),b(e.errorMessage$())}}var G=class n{memberName=$.required();memberEmail=$.required();memberRole=$.required();error=$("");close=z();selectedStrategy$=u("REASSIGN");isSubmitting$=u(!1);errorMessage$=u("");constructor(){Y(()=>{let t=this.error();t&&(this.errorMessage$.set(t),this.isSubmitting$.set(!1))})}onConfirm(){this.isSubmitting$.set(!0),this.errorMessage$.set(""),this.close.emit(this.selectedStrategy$())}onCancel(){this.close.emit(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["app-remove-dialog"]],inputs:{memberName:[1,"memberName"],memberEmail:[1,"memberEmail"],memberRole:[1,"memberRole"],error:[1,"error"]},outputs:{close:"close"},decls:43,vars:11,consts:[[1,"overlay"],[1,"backdrop",3,"click"],[1,"dialog"],[1,"dialog-header"],[1,"close-btn",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"warn-box"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"warn-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"warn-text"],[1,"strategy-section"],[1,"strategy-label"],[1,"strategy-options"],[1,"strategy-option"],["type","radio","name","strategy","value","REASSIGN",3,"change","checked"],[1,"strategy-option-title"],[1,"strategy-option-desc"],["type","radio","name","strategy","value","ARCHIVE",3,"change","checked"],[1,"error-box"],[1,"actions"],[1,"cancel-btn",3,"click"],[1,"remove-btn",3,"click","disabled"]],template:function(e,o){e&1&&(p(0,"div",0)(1,"div",1),k("click",function(){return o.onCancel()}),g(),p(2,"div",2)(3,"div",3)(4,"h2"),r(5,"Ukloni \u010Dlana tima"),g(),p(6,"button",4),k("click",function(){return o.onCancel()}),f(),p(7,"svg",5),F(8,"path",6),g()()(),h(),p(9,"div",7),f(),p(10,"svg",8),F(11,"path",9),g(),h(),p(12,"div",10)(13,"strong"),r(14,"Ova radnja se ne mo\u017Ee poni\u0161titi."),g(),p(15,"p")(16,"strong"),r(17),g(),r(18),g()()(),p(19,"div",11)(20,"p",12),r(21,"\u0160ta treba da se desi sa njihovim podacima?"),g(),p(22,"div",13)(23,"label",14)(24,"input",15),k("change",function(){return o.selectedStrategy$.set("REASSIGN")}),g(),p(25,"div")(26,"div",16),r(27,"Dodeli podatke meni"),g(),p(28,"div",17),r(29," Njihove bele\u0161ke i sa\u010Duvani rezultati \u0107e biti preba\u010Deni na vas. Razgovori \u0107e biti arhivirani. "),g()()(),p(30,"label",14)(31,"input",18),k("change",function(){return o.selectedStrategy$.set("ARCHIVE")}),g(),p(32,"div")(33,"div",16),r(34,"Arhiviraj podatke"),g(),p(35,"div",17),r(36," Njihovi podaci \u0107e biti arhivirani i bezbedno sa\u010Duvani. "),g()()()()(),m(37,ye,2,1,"div",19),p(38,"div",20)(39,"button",21),k("click",function(){return o.onCancel()}),r(40,"Otka\u017Ei"),g(),p(41,"button",22),k("click",function(){return o.onConfirm()}),r(42),g()()()()),e&2&&(l(17),b(o.memberName()),l(),M(" (",o.memberEmail(),") \u0107e odmah izgubiti pristup radnom prostoru. "),l(5),U("selected",o.selectedStrategy$()==="REASSIGN"),l(),N("checked",o.selectedStrategy$()==="REASSIGN"),l(6),U("selected",o.selectedStrategy$()==="ARCHIVE"),l(),N("checked",o.selectedStrategy$()==="ARCHIVE"),l(6),c(o.errorMessage$()?37:-1),l(4),N("disabled",o.isSubmitting$()),l(),M(" ",o.isSubmitting$()?"Uklanjanje...":"Ukloni \u010Dlana"," "))},dependencies:[D],styles:["[_nghost-%COMP%]{display:block}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:50;display:flex;align-items:center;justify-content:center;padding:16px}.backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080}.dialog[_ngcontent-%COMP%]{position:relative;z-index:10;width:100%;max-width:440px;background:#1a1a1a;border:1px solid #2a2a2a;border-radius:12px;padding:24px;box-shadow:0 25px 50px -12px #00000080;color:#fafafa;font-family:Inter,system-ui,sans-serif}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.close-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:6px;border:none;background:transparent;color:#9e9e9e;cursor:pointer}.close-btn[_ngcontent-%COMP%]:hover{background:#242424;color:#fafafa}.close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.warn-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:16px;border-radius:8px;background:#f59e0b1a;border:1px solid rgba(245,158,11,.2);padding:12px}.warn-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:#fbbf24;flex-shrink:0;margin-top:2px}.warn-text[_ngcontent-%COMP%]{font-size:13px;color:#fbbf24}.warn-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.warn-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px}.strategy-section[_ngcontent-%COMP%]{margin-bottom:24px}.strategy-label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;margin-bottom:12px}.strategy-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.strategy-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:12px;border-radius:8px;border:1px solid #2a2a2a;background:transparent;cursor:pointer;transition:border-color .2s,background .2s}.strategy-option[_ngcontent-%COMP%]:hover{background:#ffffff05}.strategy-option.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background:#3b82f60d}.strategy-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-top:2px;accent-color:#3b82f6}.strategy-option-title[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.strategy-option-desc[_ngcontent-%COMP%]{font-size:12px;color:#9e9e9e;margin-top:4px}.error-box[_ngcontent-%COMP%]{background:#ef44441a;border:1px solid rgba(239,68,68,.2);border-radius:8px;padding:12px;margin-bottom:16px;font-size:13px;color:#ef4444}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.cancel-btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;border:1px solid #2a2a2a;background:transparent;color:#fafafa;font-size:14px;font-weight:500;cursor:pointer;font-family:inherit}.cancel-btn[_ngcontent-%COMP%]:hover{background:#242424}.remove-btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;border:none;background:#ef4444;color:#fff;font-size:14px;font-weight:500;cursor:pointer;font-family:inherit}.remove-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc2626}.remove-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})};var W=(n,t)=>t.id;function Pe(n,t){n&1&&(i(0,"a",7),f(),i(1,"svg",4),v(2,"path",13)(3,"path",14),a(),r(4," Pode\u0161avanja naloga "),a())}function Oe(n,t){n&1&&(i(0,"div",11),v(1,"div",15),a())}function ke(n,t){if(n&1){let e=O();i(0,"div",16)(1,"p",19),r(2),a(),i(3,"button",8),_("click",function(){y(e);let d=s(2);return P(d.loadData())}),r(4,"Poku\u0161aj ponovo"),a()()}if(n&2){let e=s(2);l(2),b(e.loadError$())}}function Se(n,t){n&1&&(f(),i(0,"svg",4),v(1,"path",30),a())}function we(n,t){if(n&1&&(i(0,"span",28),r(1),a()),n&2){let e=s().$implicit;l(),b(e.department)}}function Te(n,t){if(n&1){let e=O();i(0,"button",31),_("click",function(){y(e);let d=s().$implicit,x=s(3);return P(x.openRemoveDialog(d))}),f(),i(1,"svg",4),v(2,"path",32),a(),r(3," Ukloni "),a()}}function Ie(n,t){if(n&1&&(i(0,"div",22)(1,"div",23)(2,"div",24),r(3),a(),i(4,"div")(5,"div",25),r(6),a(),i(7,"div",26),r(8),a()()(),i(9,"div",27)(10,"span"),m(11,Se,2,0,":svg:svg",4),r(12),a(),m(13,we,2,1,"span",28),m(14,Te,4,0,"button",29),a()()),n&2){let e=t.$implicit,o=s(3);l(3),M(" ",o.getInitials(e.name,e.email)," "),l(3),b(e.name||e.email),l(2),b(e.email),l(2),B(o.getRoleBadgeClass(e.role)),l(),c(e.role==="TENANT_OWNER"?11:-1),l(),M(" ",o.formatRole(e.role)," "),l(),c(e.department?13:-1),l(),c(o.canRemoveMember(e)?14:-1)}}function De(n,t){if(n&1&&(i(0,"section",17)(1,"h2",20),r(2),a(),i(3,"div",21),w(4,Ie,15,9,"div",22,W),a()()),n&2){let e=s(2);l(2),M(" Aktivni \u010Dlanovi (",e.members$().length,") "),l(2),T(e.members$())}}function $e(n,t){if(n&1){let e=O();i(0,"div",22)(1,"div",23)(2,"div",33),f(),i(3,"svg",4),v(4,"path",34),a()(),h(),i(5,"div")(6,"div",25),r(7),a(),i(8,"div",35)(9,"span",28),r(10),a(),i(11,"span",36),f(),i(12,"svg",4),v(13,"path",37),a(),r(14),a()()()(),h(),i(15,"button",31),_("click",function(){let d=y(e).$implicit,x=s(3);return P(x.revokeInvitation(d.id))}),r(16," Opozovi "),a()()}if(n&2){let e=t.$implicit,o=s(3);l(7),b(e.email),l(3),b(e.department),l(4),M(" Isti\u010De ",o.formatExpiry(e.expiresAt)," ")}}function Re(n,t){if(n&1&&(i(0,"section",17)(1,"h2",20),r(2),a(),i(3,"div",21),w(4,$e,17,3,"div",22,W),a()()),n&2){let e=s(2);l(2),M(" Pozivi na \u010Dekanju (",e.pendingInvitations$().length,") "),l(2),T(e.pendingInvitations$())}}function Ne(n,t){if(n&1&&(i(0,"tr")(1,"td"),r(2),a(),i(3,"td")(4,"span",28),r(5),a()(),i(6,"td")(7,"span"),r(8),a()(),i(9,"td",40),r(10),a()()),n&2){let e=t.$implicit,o=s(3);l(2),b(e.email),l(3),b(e.department),l(2),B(o.getStatusBadgeClass(e.status)),l(),M(" ",o.formatStatus(e.status)," "),l(2),b(o.formatDate(e.createdAt))}}function ze(n,t){if(n&1&&(i(0,"section",17)(1,"h2",20),r(2,"Istorija poziva"),a(),i(3,"div",38)(4,"table",39)(5,"thead")(6,"tr")(7,"th"),r(8,"Email"),a(),i(9,"th"),r(10,"Odeljenje"),a(),i(11,"th"),r(12,"Status"),a(),i(13,"th"),r(14,"Poslato"),a()()(),i(15,"tbody"),w(16,Ne,11,6,"tr",null,W),a()()()()),n&2){let e=s(2);l(16),T(e.allInvitations$())}}function je(n,t){if(n&1){let e=O();i(0,"div",18),f(),i(1,"svg",41),v(2,"path",5),a(),h(),i(3,"h3"),r(4,"Jo\u0161 nema \u010Dlanova tima"),a(),i(5,"p"),r(6,"Pozovite prvog \u010Dlana tima da biste po\u010Deli."),a(),i(7,"button",8),_("click",function(){y(e);let d=s(2);return P(d.showInviteDialog$.set(!0))}),f(),i(8,"svg",4),v(9,"path",9),a(),r(10," Pozovi \u010Dlana "),a()()}}function Ae(n,t){if(n&1&&(m(0,ke,5,1,"div",16),m(1,De,6,1,"section",17),m(2,Re,6,1,"section",17),m(3,ze,18,0,"section",17),m(4,je,11,0,"div",18)),n&2){let e=s();c(e.loadError$()?0:-1),l(),c(e.members$().length>0?1:-1),l(),c(e.pendingInvitations$().length>0?2:-1),l(),c(e.allInvitations$().length>0?3:-1),l(),c(e.members$().length===0&&e.allInvitations$().length===0?4:-1)}}function Ve(n,t){if(n&1){let e=O();i(0,"app-invite-dialog",42),_("close",function(d){y(e);let x=s();return P(x.onInviteDialogClose(d))}),a()}}function Le(n,t){if(n&1){let e=O();i(0,"app-remove-dialog",43),_("close",function(d){y(e);let x=s();return P(x.onRemoveDialogClose(d))}),a()}if(n&2){let e=s();I("memberName",e.memberToRemove$().name||e.memberToRemove$().email)("memberEmail",e.memberToRemove$().email)("memberRole",e.memberToRemove$().role)("error",e.removalError$())}}var ge=class n{invitationService=C(A);teamMembersService=C(V);authService=C(ee);destroyRef=C(R);isLoading$=u(!0);loadError$=u(null);members$=u([]);allInvitations$=u([]);pendingInvitations$=u([]);showInviteDialog$=u(!1);memberToRemove$=u(null);removalError$=u("");ngOnInit(){this.loadData()}loadData(){this.isLoading$.set(!0),this.loadError$.set(null),J([this.teamMembersService.getMembers(),this.invitationService.getInvitations()]).pipe(E(this.destroyRef)).subscribe({next:([t,e])=>{this.members$.set(t.data),this.allInvitations$.set(e.data),this.pendingInvitations$.set(e.data.filter(o=>o.status==="PENDING")),this.isLoading$.set(!1)},error:()=>{this.loadError$.set("Gre\u0161ka pri u\u010Ditavanju podataka tima. Poku\u0161ajte ponovo."),this.isLoading$.set(!1)}})}loadMembers(){this.teamMembersService.getMembers().pipe(E(this.destroyRef)).subscribe({next:t=>{this.members$.set(t.data)}})}loadInvitations(){this.invitationService.getInvitations().pipe(E(this.destroyRef)).subscribe({next:t=>{this.allInvitations$.set(t.data),this.pendingInvitations$.set(t.data.filter(e=>e.status==="PENDING"))}})}revokeInvitation(t){this.invitationService.revokeInvitation(t).pipe(E(this.destroyRef)).subscribe({next:()=>{this.loadInvitations()}})}openRemoveDialog(t){this.removalError$.set(""),this.memberToRemove$.set(t)}onRemoveDialogClose(t){if(t&&this.memberToRemove$()){let e=this.memberToRemove$();this.removalError$.set(""),this.teamMembersService.removeMember(e.id,t).pipe(E(this.destroyRef)).subscribe({next:()=>{this.memberToRemove$.set(null),this.removalError$.set(""),this.loadMembers()},error:o=>{this.removalError$.set(o.message)}})}else this.memberToRemove$.set(null),this.removalError$.set("")}onInviteDialogClose(t){this.showInviteDialog$.set(!1),t&&this.loadInvitations()}canRemoveMember(t){let e=this.authService.currentUser();return!e||e.role!=="TENANT_OWNER"?!1:t.role!=="TENANT_OWNER"}getInitials(t,e){return t?t.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2):e[0]?.toUpperCase()??"?"}formatRole(t){switch(t){case"TENANT_OWNER":return"Vlasnik";case"ADMIN":return"Admin";case"MEMBER":return"\u010Clan";default:return t}}getRoleBadgeClass(t){switch(t){case"TENANT_OWNER":return"badge badge-owner";case"ADMIN":return"badge badge-admin";default:return"badge badge-member"}}formatExpiry(t){let e=new Date(t),o=new Date,d=e.getTime()-o.getTime(),x=Math.ceil(d/(1e3*60*60*24));return x<=0?"isteklo":x===1?"za 1 dan":`za ${x} dana`}formatDate(t){return new Date(t).toLocaleDateString("sr-Latn",{month:"short",day:"numeric",year:"numeric"})}formatStatus(t){switch(t){case"PENDING":return"Na \u010Dekanju";case"ACCEPTED":return"Prihva\u0107eno";case"EXPIRED":return"Isteklo";case"REVOKED":return"Opozvano";default:return t}}getStatusBadgeClass(t){switch(t){case"PENDING":return"badge badge-pending";case"ACCEPTED":return"badge badge-accepted";case"EXPIRED":return"badge badge-expired";case"REVOKED":return"badge badge-revoked";default:return"badge badge-member"}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["app-team"]],decls:19,vars:4,consts:[[1,"page"],[1,"top-header"],[1,"header-inner"],[1,"header-left"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"header-actions"],["routerLink","/account-settings",1,"settings-link"],[1,"invite-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],[1,"main-content"],[1,"loading-state"],[3,"memberName","memberEmail","memberRole","error"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],[1,"load-spinner"],[1,"error-state"],[1,"section"],[1,"empty-state"],[1,"error-text"],[1,"section-title"],[1,"member-list"],[1,"member-card"],[1,"member-left"],[1,"member-avatar"],[1,"member-name"],[1,"member-email"],[1,"member-right"],[1,"badge","badge-dept"],[1,"remove-btn"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"remove-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"],[1,"invite-avatar"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"invite-meta"],[1,"invite-meta-item"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"table-container"],[1,"data-table"],[1,"muted"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"empty-icon"],[3,"close"],[3,"close","memberName","memberEmail","memberRole","error"]],template:function(e,o){if(e&1&&(i(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),f(),i(4,"svg",4),v(5,"path",5),a(),h(),i(6,"h1"),r(7,"Upravljanje timom"),a()(),i(8,"div",6),m(9,Pe,5,0,"a",7),i(10,"button",8),_("click",function(){return o.showInviteDialog$.set(!0)}),f(),i(11,"svg",4),v(12,"path",9),a(),r(13," Pozovi \u010Dlana "),a()()()(),h(),i(14,"main",10),m(15,Oe,2,0,"div",11)(16,Ae,5,5),a()(),m(17,Ve,1,0,"app-invite-dialog"),m(18,Le,1,4,"app-remove-dialog",12)),e&2){let d;l(9),c(((d=o.authService.currentUser())==null?null:d.role)==="TENANT_OWNER"?9:-1),l(6),c(o.isLoading$()?15:16),l(2),c(o.showInviteDialog$()?17:-1),l(),c(o.memberToRemove$()?18:-1)}},dependencies:[D,Z,L,G],styles:["[_nghost-%COMP%]{display:block}.page[_ngcontent-%COMP%]{min-height:100vh;background:#0d0d0d;color:#fafafa;font-family:Inter,system-ui,sans-serif}.top-header[_ngcontent-%COMP%]{border-bottom:1px solid #2a2a2a;background:#1a1a1a}.header-inner[_ngcontent-%COMP%]{max-width:1024px;margin:0 auto;padding:16px;display:flex;align-items:center;justify-content:space-between}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.header-left[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#3b82f6}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.settings-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;border-radius:6px;border:1px solid #2a2a2a;background:transparent;color:#fafafa;font-size:13px;font-weight:500;text-decoration:none;font-family:inherit;cursor:pointer}.settings-link[_ngcontent-%COMP%]:hover{background:#242424}.settings-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.invite-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;border-radius:6px;border:none;background:#3b82f6;color:#fff;font-size:13px;font-weight:500;cursor:pointer;font-family:inherit}.invite-btn[_ngcontent-%COMP%]:hover{background:#2563eb}.invite-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.main-content[_ngcontent-%COMP%]{max-width:1024px;margin:0 auto;padding:32px 16px}.loading-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:48px 0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.load-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid #2a2a2a;border-top-color:#3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.section[_ngcontent-%COMP%]{margin-bottom:32px}.section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:16px}.member-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.member-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-radius:8px;border:1px solid #2a2a2a;background:#1a1a1a;padding:16px}.member-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.member-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#3b82f61a;color:#3b82f6;font-size:13px;font-weight:600;flex-shrink:0}.member-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.member-email[_ngcontent-%COMP%]{font-size:13px;color:#9e9e9e;margin-top:2px}.member-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:2px 10px;border-radius:999px;font-size:12px;font-weight:500}.badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.badge-owner[_ngcontent-%COMP%]{background:#8b5cf626;color:#a78bfa}.badge-admin[_ngcontent-%COMP%]{background:#3b82f626;color:#60a5fa}.badge-member[_ngcontent-%COMP%], .badge-dept[_ngcontent-%COMP%]{background:#242424;color:#9e9e9e}.badge-pending[_ngcontent-%COMP%]{background:#f59e0b26;color:#fbbf24}.badge-accepted[_ngcontent-%COMP%]{background:#22c55e26;color:#4ade80}.badge-expired[_ngcontent-%COMP%]{background:#242424;color:#9e9e9e}.badge-revoked[_ngcontent-%COMP%]{background:#ef444426;color:#f87171}.remove-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:6px 12px;border-radius:6px;border:none;background:#ef44441a;color:#ef4444;font-size:13px;font-weight:500;cursor:pointer;font-family:inherit}.remove-btn[_ngcontent-%COMP%]:hover{background:#ef444433}.remove-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.invite-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#f59e0b26;color:#fbbf24;flex-shrink:0}.invite-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.invite-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:4px;font-size:13px;color:#9e9e9e}.invite-meta[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.invite-meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.table-container[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #2a2a2a;background:#1a1a1a;overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;font-size:13px;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #2a2a2a;background:#24242480}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;font-weight:500;color:#9e9e9e}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #2a2a2a}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;color:#fafafa}.data-table[_ngcontent-%COMP%]   td.muted[_ngcontent-%COMP%]{color:#9e9e9e}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 0;text-align:center}.empty-icon[_ngcontent-%COMP%]{width:48px;height:48px;color:#9e9e9e80;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#9e9e9e;margin-bottom:24px}.error-state[_ngcontent-%COMP%]{text-align:center;padding:32px 0}.error-text[_ngcontent-%COMP%]{font-size:14px;color:#ef4444;margin-bottom:16px}@media(max-width:640px){.member-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.member-right[_ngcontent-%COMP%]{flex-wrap:wrap}.header-inner[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:flex-start}.data-table[_ngcontent-%COMP%]{font-size:12px}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px}}"]})};export{ge as TeamComponent};
