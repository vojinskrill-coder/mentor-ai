import{a as d}from"./chunk-ZOHACMZJ.js";import"./chunk-S6LNR5CA.js";import{b as m}from"./chunk-BTP5US75.js";import{$a as v,H as h,V as f,Xa as g,_a as A,ab as b,db as S,eb as a,gb as R,hb as T,ja as C,y as n}from"./chunk-4VSIGE6D.js";var r=(t,e)=>{let o=n(m),p=n(a);return o.isAuthenticated$()?!0:(sessionStorage.setItem("returnUrl",e.url),p.navigate(["/login"]),!1)};function s(t){return(e,o)=>{let p=n(m),c=n(a),i=p.currentUser();return i?t.includes(i.role)?!0:(c.navigate(["/dashboard"]),!1):(c.navigate(["/login"]),!1)}}var u=async()=>{let t=n(a),e=n(d);try{let o=await e.getStatus();return o.tenantStatus==="ACTIVE"||o.tenantStatus==="SUSPENDED"||o.tenantStatus==="PENDING_DELETION"?!0:o.tenantStatus==="DRAFT"||o.tenantStatus==="ONBOARDING"?t.createUrlTree(["/onboarding"]):!0}catch{return t.createUrlTree(["/onboarding"])}},E=async()=>{let t=n(a),e=n(d);try{let o=await e.getStatus();return o.currentStep==="complete"?t.createUrlTree(["/chat"]):o.tenantStatus==="ACTIVE"?t.createUrlTree(["/chat"]):!0}catch{return!0}};var F=[{path:"login",loadComponent:()=>import("./chunk-KQRKFA6F.js").then(t=>t.LoginComponent)},{path:"callback",loadComponent:()=>import("./chunk-BYHEK5EA.js").then(t=>t.CallbackComponent)},{path:"register",loadComponent:()=>import("./chunk-OIZDKL3X.js").then(t=>t.RegistrationComponent)},{path:"oauth-pending",loadComponent:()=>import("./chunk-P26YAIWW.js").then(t=>t.OAuthPendingComponent)},{path:"invite/:token",loadComponent:()=>import("./chunk-YV6ZBQQY.js").then(t=>t.InviteAcceptComponent)},{path:"2fa-setup",loadComponent:()=>import("./chunk-X4GJCOC6.js").then(t=>t.TwoFactorSetupComponent),canActivate:[r]},{path:"verify-2fa",loadComponent:()=>import("./chunk-KL3RDEDB.js").then(t=>t.TwoFactorVerifyComponent)},{path:"onboarding",loadComponent:()=>import("./chunk-VO6R5NMO.js").then(t=>t.OnboardingWizardComponent),canActivate:[r,E]},{path:"dashboard",loadComponent:()=>import("./chunk-2AXG2UW3.js").then(t=>t.DashboardComponent),canActivate:[r,u]},{path:"team",loadComponent:()=>import("./chunk-IZYDCIEQ.js").then(t=>t.TeamComponent),canActivate:[r,s(["TENANT_OWNER","ADMIN"])]},{path:"account-settings",loadComponent:()=>import("./chunk-RTWLEI7A.js").then(t=>t.AccountSettingsComponent),canActivate:[r,s(["TENANT_OWNER"])]},{path:"profile-settings",loadComponent:()=>import("./chunk-J7MTA7XG.js").then(t=>t.ProfileSettingsComponent),canActivate:[r]},{path:"admin/llm-config",loadComponent:()=>import("./chunk-DEJ3CI46.js").then(t=>t.LlmConfigComponent),canActivate:[r,s(["PLATFORM_OWNER"])]},{path:"chat",loadComponent:()=>import("./chunk-EHB35Y5A.js").then(t=>t.ChatComponent),canActivate:[r,u]},{path:"chat/:conversationId",loadComponent:()=>import("./chunk-EHB35Y5A.js").then(t=>t.ChatComponent),canActivate:[r,u]},{path:"",redirectTo:"login",pathMatch:"full"}];var G="mentor_ai_token",I=(t,e)=>{if(["/api/health","/api/registration","/api/invitations/validate","/api/auth/google/callback"].some(i=>t.url.includes(i)))return e(t);let c=localStorage.getItem(G);if(c){let i=t.clone({setHeaders:{Authorization:`Bearer ${c}`}});return e(i)}return e(t)};var N={providers:[h(),R(F),A(b(),v([I]))]};var l=class t{static \u0275fac=function(o){return new(o||t)};static \u0275cmp=f({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(o,p){o&1&&C(0,"router-outlet")},dependencies:[T,S],encapsulation:2})};g(l,N).catch(t=>console.error(t));
